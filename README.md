# gradlePlugins
This repository provides [Gradle](https://gradle.org/) plugins, which are used to build projects with the MDE4CPP framework.
All plugins are published on [https://plugins.gradle.org/](https://plugins.gradle.org/) with tag 'MDE4CPP'.

## MDE4CPPCompile-Plugin
This Gradle plugin provides a task for compiling C++ projects using [CMake](https://cmake.org/) and GNU Compiler ([MinGW]() is used on Windows systems). It can be used on Unix and Windows systems.

### General structure of build.gradle to apply this plugin

```gradle
plugins {
  id "tui.sse.mde4cpp.mde4cpp-compile-plugin" version "0.2"
}

task compileProject(type: tui.sse.mde4cpp.MDE4CPPCompile) {
	projectFolder = file("path/to/project/folder")
}
```
This code fragment presents the minimal content of a *build.gradle* file to use this plugin.
The *plugin* statement must be at the top. It defines, that the plugin can be found in the plugin repository of gradle. Properties *id* and *version* specify the actual plugin and the versin to use. At the moment, a fixed coded version number must be set. This restriction is defined by gradle and will be solved in coming versions.
The plugin will be applied automatically. Thus, it is not necessary to do this here.

Now, an task can be defined, which extend the task MDE4CPPCompile. Only the project folder needs to be configured.
**Attention:** The project folder must contain a *CMakeLists.txt* file, which specify the build instruction.

That's all that needs to be done. The task can be executed by calling *gradle compileProject* now.
The defined project will be compiled with all build modes. The following section describes modification possibilities using properties.


### Properties, which can be used to configure a compile task during compilation
Properties can be used to modify tasks during calling. A property has to specified like -P{property name} or -P{property name}={value}. Alternatively, properties can be speficied in file ${user_home}/.gradle/properties.gradle on windows.


#### Count of parallel jobs:
The property *make_parallel_jobs* can be used to configure the count of compile jobs, which can be executed in parallel.

Syntax: make_parallel_jobs={1..n}

*make_parallel_jobs* has no upper limit, but it is advisable to do not exceed the core limit
If this property is not set, the system default is used. In general, parallism is not used.

#### Configure build modes
Build modes Debug and Release are provided by the MDE4CPP framework.
The following properties can be used to specify, which build mode is to use:
* **compile with debug options** - *D* or *DEBUG*
* **compile with release options** - *R* or *RELEASE*

Options:
 * If *D* or *DEBUG* is defined, Debug mode is performed.
 * If *R* or *RELEASE* are defined, Release mode is performed.
 * If none of these properties is set, both build modes are performed.
 * DEBUG and RELEASE can be used in the same build. Both modes are executed one after the other.
 * Properties with assigned value *0* are ignored.
 
#### Configure builds to be compile (only projects generated with fUML4CPP)
The generator fUML4CPP creates two projects - one for the structural part and one for the execution. Path to structure project is be set automatically in a Gradle task generated by fUML4CPP. The path to execution project will be calculated based on folder structure and name convention. The execution project is placed in same parent folder and named identically to structure project extended by 'Exec'.

Same as the build mode, properties are used to enable or disable the compilation of structure or execution project.
* **structure project** - *S* or *STRUCTURE*
* **execution project** - *E* or *EXECUTION*

Options:
 * If *S* or *STRUCTURE* is defined, structure project will be compiled.
 * If *E* or *EXECUTION* are defined, structure execution will be compiled.
 * If none of these properties is set, both build modes are performed.
 * Execution and structure project can be used in the same build. Both modes are executed one after the other.
 * Properties with assigned value *0* are ignored.
 
